<div class="customers-page">
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">Add, Edit & Remove</h1>
    <div class="header-actions">
      <button mat-raised-button color="primary" class="add-button" (click)="addCustomer()">
        <mat-icon>add</mat-icon>
        <span>Add</span>
      </button>
      <button mat-stroked-button class="delete-button" type="button">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </div>

  <!-- Table Card -->
  <mat-card class="table-card">
    <!-- Search Bar -->
    <div class="search-section">
      <div class="search-wrapper">
        <mat-icon class="search-icon">search</mat-icon>
        <input 
          type="text" 
          [(ngModel)]="searchName" 
          (keyup.enter)="onSearch()" 
          placeholder="Search..." 
          class="search-input"
        />
      </div>
    </div>

    <!-- Loading State -->
    @if (loading) {
      <div class="loading-section">
        <mat-spinner diameter="50"></mat-spinner>
        <p class="loading-text">Loading customers...</p>
      </div>
    }

    <!-- Table Content -->
    @if (!loading) {
      <div class="table-section">
        <div class="table-container">
          <table mat-table [dataSource]="customers" class="customers-table">
            <!-- ID Column -->
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef class="sortable-header">
                <span>ID</span>
                <mat-icon class="sort-icon">unfold_more</mat-icon>
              </th>
              <td mat-cell *matCellDef="let customer" class="id-cell">
                {{ customer.id }}
              </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef class="sortable-header">
                <span>CUSTOMER</span>
                <mat-icon class="sort-icon">unfold_more</mat-icon>
              </th>
              <td mat-cell *matCellDef="let customer" class="name-cell">
                {{ customer.name }}
              </td>
            </ng-container>

            <!-- Email Column -->
            <ng-container matColumnDef="email">
              <th mat-header-cell *matHeaderCellDef class="sortable-header">
                <span>Email</span>
                <mat-icon class="sort-icon">unfold_more</mat-icon>
              </th>
              <td mat-cell *matCellDef="let customer" class="email-cell">
                {{ customer.email }}
              </td>
            </ng-container>

            <!-- Phone Column -->
            <ng-container matColumnDef="phone">
              <th mat-header-cell *matHeaderCellDef class="sortable-header">
                <span>Phone</span>
                <mat-icon class="sort-icon">unfold_more</mat-icon>
              </th>
              <td mat-cell *matCellDef="let customer" class="phone-cell">
                {{ customer.phone }}
              </td>
            </ng-container>

            <!-- Actions Column -->
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef class="actions-header">
                ACTION
              </th>
              <td mat-cell *matCellDef="let customer" class="actions-cell">
                <button 
                  mat-stroked-button 
                  color="warn" 
                  class="action-button remove-button" 
                  (click)="deleteCustomer(customer.id)"
                  type="button"
                >
                  Remove
                </button>
              </td>
            </ng-container>

            <!-- Table Rows -->
            <tr mat-header-row *matHeaderRowDef="displayedColumns" class="table-header-row"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-data-row"></tr>
          </table>
        </div>

        <!-- Paginator -->
        <mat-paginator
          [length]="totalItems"
          [pageSize]="pageSize"
          [pageIndex]="pageIndex"
          [pageSizeOptions]="[5, 10, 20, 50]"
          (page)="onPageChange($event)"
          class="table-paginator"
        ></mat-paginator>
      </div>
    }
  </mat-card>
</div>
